(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-chat"],{"04ca":function(t,n,i){"use strict";i.r(n);var e=i("fe3a"),s=i.n(e);for(var a in e)"default"!==a&&function(t){i.d(n,t,function(){return e[t]})}(a);n["default"]=s.a},"1c26":function(t,n,i){"use strict";i.r(n);var e=i("fe68"),s=i("04ca");for(var a in s)"default"!==a&&function(t){i.d(n,t,function(){return s[t]})}(a);var o=i("2877"),u=Object(o["a"])(s["default"],e["a"],e["b"],!1,null,"8f0fefaa",null);n["default"]=u.exports},fe3a:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e={data:function(){return{InputBottom:0,from_id:1,msgList:[],user_info:{},user_id:0,content:""}},onLoad:function(t){console.log(t),this.from_id=t.from_id,this.getUserInfo(),this.getList()},methods:{InputFocus:function(t){this.InputBottom=t.detail.height},InputBlur:function(t){this.InputBottom=0},getList:function(){var t=this,n=this.fun.getUser();this.user_id=n[0],uni.request({url:this.api.get_msg,header:{token:n[2]},data:{to_id:n[0],from_id:this.from_id},success:function(n){console.log(n.data),n.data.error<0&&uni.showToast({title:n.data.msg,icon:"none"}),t.msgList=n.data.data},fail:this.fun.fail})},sendMsg:function(){var t=this,n=this.fun.getUser();uni.request({url:this.api.send_msg,header:{token:n[2]},method:"POST",data:{to_id:this.from_id,to_face:this.user_info.face,to_nickrname:this.user_info.nickname,from_id:n[0],from_face:n[4],from_nickrname:n[1],type:"text",data:this.content,number:1},success:function(n){n.data.error<0?uni.showToast({title:n.data.msg,icon:"none"}):(t.content="",t.getList())},fail:this.fun.fail})},getUserInfo:function(){var t=this.fun.getUser();uni.request({url:this.api.user_info_by_uid,header:{token:t[2]},data:{uid:this.from_id},success:this.callback,fail:function(t){console.log(t)}})},callback:function(t){var n=t.data;t.data.error<0?uni.showToast({title:t.data.msg}):this.user_info=n.data},startRecognize:function(){var t=this,n={engine:"iFly",punctuation:!1,timeout:1e4};plus.speech.startRecognize(n,function(n){t.content=t.content+n})}}};n.default=e},fe68:function(t,n,i){"use strict";var e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("v-uni-view",[i("cu-custom",{staticClass:"nav-bar",attrs:{bgColor:"bg-gradual-blue",isBack:!0}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),i("template",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.user_info.nickname))])],2),i("v-uni-view",{staticClass:"cu-chat"},t._l(t.msgList,function(n,e){return i("v-uni-view",{key:e},[t.user_id!=n.to_id?i("v-uni-view",{staticClass:"cu-item self"},[i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticClass:"content bg-green shadow"},[i("v-uni-text",[t._v(t._s(n.data))])],1)],1),i("v-uni-view",{staticClass:"cu-avatar radius",style:[{backgroundImage:"url("+n.from_face+")"}]}),i("v-uni-view",{staticClass:"date"},[t._v(t._s(n.time))])],1):t._e(),t.user_id==n.to_id?i("v-uni-view",{staticClass:"cu-item"},[i("v-uni-view",{staticClass:"cu-avatar radius",style:[{backgroundImage:"url("+n.from_face+")"}]}),i("v-uni-view",{staticClass:"main"},[i("v-uni-view",{staticClass:"content shadow"},[i("v-uni-text",[t._v(t._s(n.data))])],1)],1),i("v-uni-view",{staticClass:"date "},[t._v(t._s(n.time))])],1):t._e()],1)}),1),i("v-uni-view",{staticClass:"page-footer"}),i("v-uni-view",{staticClass:"cu-bar foot input",style:[{bottom:t.InputBottom+"px"}]},[i("v-uni-view",{staticClass:"action",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.startRecognize.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-sound text-grey"})],1),i("v-uni-input",{staticClass:"solid-bottom",attrs:{"adjust-position":!1,focus:!1,maxlength:"300","cursor-spacing":"10"},on:{focus:function(n){arguments[0]=n=t.$handleEvent(n),t.InputFocus.apply(void 0,arguments)},blur:function(n){arguments[0]=n=t.$handleEvent(n),t.InputBlur.apply(void 0,arguments)}},model:{value:t.content,callback:function(n){t.content=n},expression:"content"}}),i("v-uni-view",{staticClass:"action"},[i("v-uni-text",{staticClass:"cuIcon-emojifill text-grey"})],1),i("v-uni-button",{staticClass:"cu-btn bg-green shadow",on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.sendMsg()}}},[t._v("发送")])],1)],1)},s=[];i.d(n,"a",function(){return e}),i.d(n,"b",function(){return s})}}]);